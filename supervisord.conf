[supervisord]
logfile=logs/supervisord.log
logfile_maxbytes=50MB 
loglevel=error

[inet_http_server]
port = 127.0.0.1:8011

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl = http://localhost:8011

[program:webserver]
stderr_logfile = logs/webserver.log
stderr_logfile_maxbytes = 10MB
command = gunicorn volentix.wsgi -b localhost:8000 --log-level info --workers 2
stopasgroup = true

[program:celery]
stdout_logfile = logs/celery.log
stdout_logfile_maxbytes = 10MB
command = celery -A volentix worker -l info -c 1 --beat
stopasgroup = true

[program:flower]
stdout_logfile = logs/flower.log
stdout_logfile_maxbytes = 10MB
command = celery flower -A volentix --basic_auth=admin:default2017
stopasgroup = true

[program:redis]
stdout_logfile = logs/redis.log
stdout_logfile_maxbytes = 10MB
command = redis-server
stopasgroup = true